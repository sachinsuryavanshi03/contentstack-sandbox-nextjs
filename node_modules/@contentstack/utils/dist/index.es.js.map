{"version":3,"file":"index.es.js","sources":["../src/Models/metadata-model.ts","../src/embedded-types/style-type.ts","../src/helper/html-to-json.ts","../src/extensions/index.ts","../src/options/default-options.ts","../src/helper/find-embeded-object.ts","../src/helper/find-render-content.ts","../src/render-embedded-objects.ts","../src/nodes/node-type.ts","../src/nodes/mark-type.ts","../src/nodes/node.ts","../src/nodes/document.ts","../src/nodes/text-node.ts","../src/options/default-node-options.ts","../src/helper/enumerate-entries.ts","../src/json-to-html.ts","../src/gql.ts","../src/entry-editable.ts"],"sourcesContent":["import StyleType from '../embedded-types/style-type';\nimport TextNode from '../nodes/text-node';\nexport interface Metadata {\n  text: string\n  attributes: Attributes\n\n  itemUid: string | undefined\n  itemType: 'entry' | 'asset' | undefined\n  styleType: StyleType | undefined\n  contentTypeUid: string | undefined\n}\n\nexport interface Attributes {\n  type?: 'entry' | 'asset',\n  class?: string,\n  [key: string]: any,\n  'sys-style-type'?: string,\n}\n\nexport interface EntryAttributes extends Attributes {\n  'data-sys-entry-uid': string;\n  'data-sys-entry-local': string;\n  'data-sys-content-type-uid': string;\n}\n\nexport interface AssetAttributes extends Attributes {\n  'data-sys-asset-uid': string;\n  'data-sys-asset-filelink': string;\n  'data-sys-asset-contenttype': string;\n}\n\nexport function createMetadata(attribute: Attributes): Metadata {\n  return {\n    text: attribute['#text'],\n    itemUid: attribute[\"data-sys-entry-uid\"] || attribute[\"data-sys-asset-uid\"],\n    itemType: attribute.type,\n    styleType: attribute[\"sys-style-type\"] as StyleType,\n    attributes: attribute,\n    contentTypeUid: attribute[\"data-sys-content-type-uid\"],\n  }\n}\n\nexport function nodeToMetadata(attribute: Attributes, textNode: TextNode): Metadata {\n return {\n  text: textNode.text,\n  itemUid: attribute[\"entry-uid\"] || attribute[\"asset-uid\"],\n  itemType: attribute.type,\n  styleType: attribute[\"display-type\"] as StyleType,\n  attributes: attribute,\n  contentTypeUid: attribute[\"content-type-uid\"],\n }\n}\n\nexport function attributeToString( attributes: Attributes):string {\n  let result = ''\n  for (const key in attributes) {\n    if (Object.prototype.hasOwnProperty.call(attributes, key)) {\n      let element = attributes[key];\n      if (element instanceof Array) {\n        let elementString = ''\n        let isFirst = true \n        element.forEach((value) => {\n          if (isFirst) {\n            elementString += `${value}`\n            isFirst = false\n          }else {\n            elementString += `, ${value}`\n          }\n        })\n        element = elementString\n      } else if (typeof element === 'object') {\n        let elementString = ''\n        for (const elementKey in element) {\n          if (Object.prototype.hasOwnProperty.call(element, elementKey)) {\n            const value = element[elementKey];\n            elementString += `${elementKey}:${value}; `\n          }\n        }\n        element = elementString\n      }\n      result += ` ${key}=\"${element}\"`\n    }\n  }\n  return result\n}","enum StyleType {\n  BLOCK = 'block',\n  INLINE = 'inline',\n  LINK = 'link',\n  DISPLAY = 'display',\n  DOWNLOAD = 'download'\n}\n\nexport default StyleType;\n","\nexport function elementToJson(element: Element): object {\n  let obj: any = { }\n  for (let i = 0; i<element.attributes.length; i++) {\n    obj[element.attributes.item(i).name] = element.attributes.item(i).value\n  }\n  \n  element.childNodes.forEach((chileNode) => {\n    const node: ChildNode = (chileNode)\n    obj = {\n      ...obj,\n      ...parseElement(node)\n    }\n  })\n  return obj\n}\n\nfunction parseElement(node: ChildNode): any {\n  const obj: any = {}\n  if (node.nodeType === 3) {\n    obj['#text'] = node.textContent;\n  }else if (node.nodeType === 1) {\n    obj[node.nodeName.toLowerCase()] = elementToJson(node as Element)\n  }\n  return obj\n}","import { elementToJson } from '../helper/html-to-json';\nimport { Metadata, createMetadata, Attributes } from '../Models/metadata-model';\nconst frameflag = 'documentfragmentcontainer';\n\ndeclare global {\n  interface String {\n    forEachEmbeddedItem(callbackfn: (embededObjectTag: string, object: Metadata) => void): void;\n  }\n}\n\nString.prototype.forEachEmbeddedItem = function (\n  callbackfn: (embededObjectTag: string, object: Metadata) => void,\n): void {\n\n  const str = `<${frameflag}>${this.toString()}</${frameflag}>`;\n  const root = (new DOMParser()).parseFromString(str, 'text/html')\n  const embeddedEntries = root.querySelectorAll(\".embedded-entry\")\n  \n  embeddedEntries.forEach((element) => {    \n    callbackfn(element.outerHTML, createMetadata(elementToJson(element) as Attributes))\n  })\n  const embeddedAsset = root.querySelectorAll(\".embedded-asset\")\n  embeddedAsset.forEach((element) => {\n    callbackfn(element.outerHTML, createMetadata(elementToJson(element) as Attributes))\n  })\n};\n","import StyleType from '../embedded-types/style-type';\nimport { RenderOption } from '.';\nimport { Metadata } from '../Models/metadata-model';\nimport { EmbeddedItem } from '../Models/embedded-object';\nimport { EntryNode } from '../Models/json-rte-model';\n\nexport const defaultOptions: RenderOption = {\n  [StyleType.BLOCK]: (item: EmbeddedItem | EntryNode) =>\n    `<div><p>${item.title || item.uid}</p><p>Content type: <span>${item._content_type_uid || (item.system ? item.system.content_type_uid : '')}</span></p></div>`,\n  [StyleType.INLINE]: (item: EmbeddedItem| EntryNode) => `<span>${item.title || item.uid}</span>`,\n  [StyleType.LINK]: (item: EmbeddedItem| EntryNode, metadata: Metadata) => `<a href=\"${item.url}\">${metadata.text || item.title || item.uid || (item.system ? item.system.uid : '')}</a>`,\n  [StyleType.DISPLAY]: (item: EmbeddedItem| EntryNode, metadata: Metadata) => `<img src=\"${item.url}\" alt=\"${metadata.attributes.alt || item.title || item.filename || item.uid \n    || (item.system ? item.system.uid : '')}\" />`,\n  [StyleType.DOWNLOAD]: (item: EmbeddedItem| EntryNode, metadata: Metadata) => `<a href=\"${item.url}\">${metadata.text || item.title || item.uid || (item.system ? item.system.content_type_uid : '')}</a>`,\n};\n","import { defaultOptions } from '../options/default-options';\nimport { EntryEmbedable, EmbeddedItem } from '../Models/embedded-object';\nimport { RenderOption, RenderContentType, RenderItem } from '../options/index';\nimport { EntryAttributes, Metadata } from '../Models/metadata-model';\nimport { EntryNode } from '../Models/json-rte-model';\n\n// This function will find Embedded object present in string\nexport function findEmbeddedEntry(\n  uid: string,\n  contentTypeUid: string,\n  embeddeditems: (EmbeddedItem| EntryNode)[] = [],\n): (EmbeddedItem | EntryNode)[] {\n  return embeddeditems.filter((entry: any) => {\n    if ((entry.uid && (entry as EmbeddedItem).uid === uid && (entry as EmbeddedItem)._content_type_uid === contentTypeUid)|| (entry.system && (entry as EntryNode).system.uid === uid && (entry as EntryNode).system.content_type_uid === contentTypeUid)) {\n      return entry;\n    }\n  });\n}\n\nexport function findEmbeddedAsset(uid: string, embeddedAssets: (EmbeddedItem| EntryNode)[] = []): (EmbeddedItem| EntryNode)[] {\n  return embeddedAssets.filter((asset: any) => {\n    if ((asset.uid && (asset as EmbeddedItem).uid === uid) || asset.system && (asset as EntryNode).system.uid === uid) {\n      return asset;\n    }\n  });\n}\n\nexport function findGQLEmbeddedItems(metadata: Metadata, items: (EmbeddedItem| EntryNode)[]): (EmbeddedItem| EntryNode)[] {\n  if (metadata.itemType === 'entry') {\n    return findEmbeddedEntry(\n        metadata.itemUid,\n        metadata.contentTypeUid,\n        items\n        );\n  } else {\n    return findEmbeddedAsset(\n        metadata.itemUid, \n        items\n        );\n  }\n}\n\nexport function findEmbeddedItems(object: Metadata, entry: EntryEmbedable): (EmbeddedItem| EntryNode)[] {\n  if (object && object !== undefined && entry && entry !== undefined) {\n    if (entry._embedded_items !== undefined) {\n      const entryEmbedable = entry\n      const items = Object.values(entryEmbedable._embedded_items || []).reduce((accumulator, value) => accumulator.concat(value), [])\n      return findGQLEmbeddedItems(object, items)\n    }\n  }\n  return [];\n}\n\nexport function findRenderString(\n  item: EmbeddedItem | EntryNode,\n  metadata: Metadata,\n  renderOptions?: RenderOption,\n): string {\n  if ((!item && item === undefined) || (!metadata && metadata === undefined)) {\n    return '';\n  }\n  \n  if (renderOptions && renderOptions[metadata.styleType] !== undefined) {\n    const renderFunction = renderOptions[metadata.styleType] as RenderItem;\n\n     if (\n      (metadata.attributes as EntryAttributes)['data-sys-content-type-uid'] !== undefined &&\n      typeof renderFunction !== 'function' &&\n      renderFunction[(metadata.attributes as EntryAttributes)['data-sys-content-type-uid']] !== undefined\n    ) {\n      return (renderFunction as RenderContentType)[(metadata.attributes as EntryAttributes)['data-sys-content-type-uid']](item, metadata);\n    } else if (\n      (metadata.attributes as EntryAttributes)['data-sys-content-type-uid'] !== undefined &&\n      typeof renderFunction !== 'function' &&\n      (renderFunction as RenderContentType).$default !== undefined\n    ) {\n      return (renderFunction as RenderContentType).$default(item, metadata);\n    } else if (\n      metadata.contentTypeUid !== undefined &&\n      typeof renderFunction !== 'function' &&\n      renderFunction[metadata.contentTypeUid] !== undefined\n    ) {\n      return (renderFunction as RenderContentType)[metadata.contentTypeUid](item, metadata)\n    } else if (\n      metadata.contentTypeUid !== undefined &&\n      typeof renderFunction !== 'function' &&\n      (renderFunction as RenderContentType).$default !== undefined\n    ) {\n      return (renderFunction as RenderContentType).$default(item, metadata);\n    }  else if (typeof renderFunction === 'function') {\n      return renderFunction(item, metadata);\n    }\n  }\n  const defaultRenderFunction = defaultOptions[metadata.styleType] as RenderItem;  \n  return defaultRenderFunction(item, metadata);\n}\n","import { EntryEmbedable } from '../Models/embedded-object';\nexport function findRenderContent<Type>(keyPaths: string, entry: EntryEmbedable, render: (content: Type) => (string| string[])){\n     getContent(keyPaths.split(\".\"), entry, render)\n}\n\nexport function getContent<Type>(keys: string[], object: any, render: (content: Type) => (string| string[])) {\n    if (keys) {\n        const key = keys[0]\n        if (keys.length === 1 && object[key]) {\n            object[key] = render(object[key])\n        } else if (keys.length > 0) {\n            if (object[key]) {\n                const newKeys = keys.slice(1)\n                if (Array.isArray(object[key])) {\n                    // tslint:disable-next-line: prefer-for-of\n                    for (const objKey of object[key]) {\n                        getContent(newKeys, objKey, render)\n                    }\n                } else if (typeof object[key] === 'object') {\n                    getContent(newKeys, object[key], render)\n                }\n            }\n        }\n    }\n}","import './extensions'\nimport { Option, RenderOption } from './options';\nimport { Metadata } from './Models/metadata-model';\nimport { findEmbeddedItems, findRenderString } from './helper/find-embeded-object';\nimport { EntryEmbedable } from './Models/embedded-object';\nimport { findRenderContent } from './helper/find-render-content';\n/**\n * \n * @param {EntryEmbedable| EntryEmbedable[]} entry - Objects that contains RTE with embedded objects\n * @param {string[]} paths - Key paths for RTE contents in Entry object\n * @param {RenderOption?} renderOption -  Optional render options to render content\n */\nexport function render(option: { \n    entry: EntryEmbedable| EntryEmbedable[],\n    renderOption?: RenderOption,\n    paths?: string[]\n}) {\n\n    function findContent(path: string, entry: EntryEmbedable) {\n        findRenderContent(path, entry, (content: string| string[]) => {\n            return renderContent(content, { entry, renderOption: option.renderOption })\n        })\n    }\n\n    function findAndRender (entry: EntryEmbedable) {\n        if (!option.paths || option.paths.length === 0) {\n            Object.keys({ \n                ...entry._embedded_items,\n            }).forEach((path) => {\n                findContent(path, entry)\n            })\n        } else {\n            option.paths.forEach((path) => {\n                findContent(path, entry)\n            })\n        }\n    }\n\n    if (option.entry instanceof Array) {\n        option.entry.forEach((entry) => {\n            findAndRender(entry)\n        })\n    }else {\n        findAndRender(option.entry)\n    }\n}\n\n/**\n * \n * @param {string | string[]} content - RTE content to render \n * @param {EntryEmbedable} options.entry - Entry object containing embedded objects\n * @param {RenderOption?} options.renderOption - Optional render options to render content\n */\nexport function renderContent(content: (string | string[]), option: Option): (string| string[]) {\n    // return blank if content not present\n    if (!content || content === undefined) {\n        return ''\n    }\n\n    // render content of type string\n    if (typeof content === 'string') {\n        let contentToReplace = content\n        content.forEachEmbeddedItem((embededObjectTag: string, object: Metadata) => {\n            contentToReplace = findAndReplaceEmbeddedItem(\n                contentToReplace,\n                embededObjectTag, \n                object, \n                option)\n        })\n        return contentToReplace\n    }\n\n    // render content of type array of string\n    const resultContent: string[] = []\n    content.forEach((element) => {\n        resultContent.push(renderContent(element, option) as string)\n    })\n    return resultContent\n}\n\nfunction findAndReplaceEmbeddedItem(content:string, embededObjectTag: string, metadata: Metadata, option: Option): string {    \n    const embeddedObjects = findEmbeddedItems(metadata, option.entry)\n    const renderString = findRenderString(embeddedObjects[0], metadata, option.renderOption)\n    return content.replace(embededObjectTag, renderString)\n}\n","enum NodeType {\n    DOCUMENT = 'doc',\n    PARAGRAPH = 'p',\n    \n    LINK = 'a',\n    IMAGE = 'img',\n    EMBED = 'embed',\n\n    HEADING_1 = 'h1',\n    HEADING_2 = 'h2',\n    HEADING_3 = 'h3',\n    HEADING_4 = 'h4',\n    HEADING_5 = 'h5',\n    HEADING_6 = 'h6',\n  \n    ORDER_LIST = 'ol',\n    UNORDER_LIST = 'ul',\n    LIST_ITEM = 'li',\n  \n    HR = 'hr',\n\n    TABLE = 'table',\n    TABLE_HEADER = 'thead',\n    TABLE_BODY = 'tbody',\n    TABLE_FOOTER = 'tfoot',\n    TABLE_ROW = 'tr',\n    TABLE_HEAD = 'th',\n    TABLE_DATA = 'td',\n\n    BLOCK_QUOTE = 'blockquote',\n    CODE = 'code',\n\n    TEXT = 'text',\n    REFERENCE = 'reference'\n}\n\nexport default NodeType;","enum MarkType {\n    BOLD = 'bold',\n    ITALIC = 'italic',\n    UNDERLINE = 'underline',\n\n    STRIKE_THROUGH = 'strikethrough',\n    INLINE_CODE = 'inlineCode',\n\n\n    SUBSCRIPT = 'subscript',\n    SUPERSCRIPT = 'superscript'\n}\n\nexport default MarkType","import { AnyNode } from \"../json-to-html\"\nimport { Attributes } from \"../Models/metadata-model\"\nimport NodeType from \"./node-type\"\n\nexport default class Node {\n    type: NodeType\n    attrs: Attributes\n    children: AnyNode[]\n}","import Node from \"./node\"\nimport NodeType from \"./node-type\"\n\nexport default class Document extends Node {\n    type: NodeType.DOCUMENT\n\n    constructor() {\n        super()\n        this.type = NodeType.DOCUMENT\n    }\n}","import Node from \"./node\"\n\nexport default class TextNode extends Node {\n    bold?: boolean\n    italic?: boolean\n    underline?: boolean\n    strikethrough?: boolean\n    inlineCode?: boolean\n    superscript?: boolean\n    subscript?: boolean\n\n    text: string\n\n    constructor(text: string) {\n        super()\n        this.text = text\n    }\n}\n","import { Next, RenderOption } from \".\";\nimport MarkType from \"../nodes/mark-type\";\nimport Node from \"../nodes/node\";\nimport NodeType from \"../nodes/node-type\";\n\nexport const defaultNodeOption: RenderOption = {\n    [NodeType.DOCUMENT]:(node: Node) => {\n        return ``\n    },\n    [NodeType.PARAGRAPH]:(node: Node, next: Next) => {\n         return `<p>${next(node.children)}</p>`\n    },\n    [NodeType.LINK]:(node: Node, next: Next) => {\n         return `<a href=\"${node.attrs.href || node.attrs.url}\">${next(node.children)}</a>`\n    },\n    [NodeType.IMAGE]:(node: Node, next: Next) => {\n        return `<img src=\"${node.attrs.src || node.attrs.url}\" />${next(node.children)}`\n    },\n    [NodeType.EMBED]:(node: Node, next: Next) => {\n        return `<iframe src=\"${node.attrs.src || node.attrs.url}\">${next(node.children)}</iframe>`\n    },\n    [NodeType.HEADING_1]:(node: Node, next: Next) => {\n        return `<h1>${next(node.children)}</h1>`\n    },\n    [NodeType.HEADING_2]:(node: Node, next: Next) => {\n        return `<h2>${next(node.children)}</h2>`\n    },\n    [NodeType.HEADING_3]:(node: Node, next: Next) => {\n        return `<h3>${next(node.children)}</h3>`\n    },\n    [NodeType.HEADING_4]:(node: Node, next: Next) => {\n        return `<h4>${next(node.children)}</h4>`\n    },\n    [NodeType.HEADING_5]:(node: Node, next: Next) => {\n        return `<h5>${next(node.children)}</h5>`\n    },\n    [NodeType.HEADING_6]:(node: Node, next: Next) => {\n        return `<h6>${next(node.children)}</h6>`\n    },\n    [NodeType.ORDER_LIST]:(node: Node, next: Next) => {\n        return `<ol>${next(node.children)}</ol>`\n    },\n    [NodeType.UNORDER_LIST]:(node: Node, next: Next) => {\n        return `<ul>${next(node.children)}</ul>`\n    },\n    [NodeType.LIST_ITEM]:(node: Node, next: Next) => {\n        return `<li>${next(node.children)}</li>`\n    },\n    [NodeType.HR]:(node: Node, next: Next) => {\n        return `<hr>`\n    },\n    [NodeType.TABLE]:(node: Node, next: Next) => {\n        return `<table>${next(node.children)}</table>`\n    },\n    [NodeType.TABLE_HEADER]:(node: Node, next: Next) => {\n        return `<thead>${next(node.children)}</thead>`\n    },\n    [NodeType.TABLE_BODY]:(node: Node, next: Next) => {\n        return `<tbody>${next(node.children)}</tbody>`\n    },\n    [NodeType.TABLE_FOOTER]:(node: Node, next: Next) => {\n        return `<tfoot>${next(node.children)}</tfoot>`\n    },\n    [NodeType.TABLE_ROW]:(node: Node, next: Next) => {\n        return `<tr>${next(node.children)}</tr>`\n    },\n    [NodeType.TABLE_HEAD]:(node: Node, next: Next) => {\n        return `<th>${next(node.children)}</th>`\n    },\n    [NodeType.TABLE_DATA]:(node: Node, next: Next) => {\n        return `<td>${next(node.children)}</td>`\n    },\n    [NodeType.BLOCK_QUOTE]:(node: Node, next: Next) => {\n        return `<blockquote>${next(node.children)}</blockquote>`\n    },\n    [NodeType.CODE]:(node: Node, next: Next) => {\n        return `<code>${next(node.children)}</code>`\n    },\n\n    ['reference']:(node: Node, next: Next) => {\n        return ``\n    },\n    ['default']:(node: Node, next: Next) => {\n        return next(node.children)\n    },\n\n    [MarkType.BOLD]:(text: string) => {\n        return `<strong>${text}</strong>`\n    },\n    [MarkType.ITALIC]:(text: string) => {\n        return `<em>${text}</em>`\n    },\n    [MarkType.UNDERLINE]:(text: string) => {\n        return `<u>${text}</u>`\n    },\n    [MarkType.STRIKE_THROUGH]:(text: string) => {\n        return `<strike>${text}</strike>`\n    },\n    [MarkType.INLINE_CODE]:(text: string) => {\n        return `<span>${text}</span>`\n    },\n    [MarkType.SUBSCRIPT]:(text: string) => {\n        return `<sub>${text}</sub>`\n    },\n    [MarkType.SUPERSCRIPT]:(text: string) => {\n        return `<sup>${text}</sup>`\n    },\n\n}","import { AnyNode } from \"../json-to-html\";\nimport { EmbeddedItem, EntryEmbedable } from \"../Models/embedded-object\";\nimport { Metadata, nodeToMetadata } from \"../Models/metadata-model\";\nimport MarkType from \"../nodes/mark-type\";\nimport TextNode from \"../nodes/text-node\";\nimport Node from '../nodes/node'\nimport Document from '../nodes/document'\nimport { Next, RenderMark, RenderNode, RenderOption } from \"../options\";\nimport { defaultNodeOption } from \"../options/default-node-options\";\nimport { findRenderString } from \"./find-embeded-object\";\nimport { EntryNode } from \"../Models/json-rte-model\";\n\nexport function enumerate( \n    entries: EntryEmbedable[] | EmbeddedItem[],\n    process: (entry: EntryEmbedable| EmbeddedItem) => void\n    ) {\n    for (const entry of entries) {\n        process(entry)\n    }\n}\n\nexport function enumerateContents(\n    content:Document | Document[], \n    renderOption?: RenderOption,\n    renderEmbed?: (metadata: Metadata) => EmbeddedItem| EntryNode\n): string | string[] {\n    if (!(content instanceof Array) && content.type !== 'doc') {\n        return content as unknown as string\n    } \n    if (content instanceof Array) {\n        const result: string[] = []\n        content.forEach((doc) => {\n            result.push(enumerateContents(doc, renderOption, renderEmbed) as string)\n        })\n        return result\n    } \n    const commonRenderOption = {\n        ...defaultNodeOption,\n        ...renderOption\n    }\n    return nodeChildrenToHTML(content.children, commonRenderOption, renderEmbed)\n}\n\nexport function textNodeToHTML(node: TextNode, renderOption: RenderOption): string {\n    let text = node.text\n    if (node.superscript) {\n        text =  (renderOption[MarkType.SUPERSCRIPT] as RenderMark)(text)\n    }\n    if (node.subscript) {\n        text =  (renderOption[MarkType.SUBSCRIPT] as RenderMark)(text)\n    }\n    if (node.inlineCode) {\n        text =  (renderOption[MarkType.INLINE_CODE] as RenderMark)(text)\n    }\n    if (node.strikethrough) {\n        text =  (renderOption[MarkType.STRIKE_THROUGH] as RenderMark)(text)\n    }\n    if (node.underline) {\n        text =  (renderOption[MarkType.UNDERLINE] as RenderMark)(text)\n    }\n    if (node.italic) {\n        text =  (renderOption[MarkType.ITALIC] as RenderMark)(text)\n    }\n    if (node.bold) {\n        text =  (renderOption[MarkType.BOLD] as RenderMark)(text)\n    }\n    return text\n}\nexport function referenceToHTML(node: Node, \n    renderOption: RenderOption,\n    renderEmbed?: (metadata: Metadata) => EmbeddedItem | EntryNode\n): string {\n    function sendToRenderOption(referenceNode: Node): string {\n        return (renderOption[referenceNode.type] as RenderNode)(referenceNode, undefined)\n    }\n    if (!renderEmbed && renderOption[node.type] !== undefined) {\n        return sendToRenderOption(node)\n    }\n    if (!renderEmbed) {\n        return ''\n    }\n    const metadata = nodeToMetadata(node.attrs, ((node.children && node.children.length > 0) ? node.children[0]: {}) as unknown as TextNode)\n    const item = renderEmbed(metadata)    \n    if (!item && renderOption[node.type] !== undefined) {\n        return sendToRenderOption(node)\n    }\n    return findRenderString(item, metadata, renderOption)\n}\n\nfunction nodeChildrenToHTML(nodes: AnyNode[], \n    renderOption: RenderOption,\n    renderEmbed?: (metadata: Metadata) => EmbeddedItem | EntryNode,\n    ): string {\n        return nodes.map<string>((node: AnyNode) => nodeToHTML(node, renderOption, renderEmbed)).join('')\n}\n\nfunction nodeToHTML(\n    node: AnyNode, \n    renderOption: RenderOption,\n    renderEmbed?: (metadata: Metadata) => EmbeddedItem | EntryNode,\n): string {    \n    if (!node.type) {\n        return textNodeToHTML(node as TextNode, renderOption)\n    }else if ((node.type as string) === 'reference') {\n        return referenceToHTML(node, renderOption, renderEmbed)\n    }else {\n        const next: Next = nodes => nodeChildrenToHTML(nodes, renderOption, renderEmbed)\n        if (renderOption[node.type] !== undefined) {\n            return (renderOption[node.type] as RenderNode)(node, next)\n        }else {\n            return (renderOption.default as RenderNode)(node, next)\n        }\n    }\n}\n","import Node from './nodes/node';\nimport TextNode from './nodes/text-node';\nimport Document from './nodes/document';\nimport { Metadata } from './Models/metadata-model';\nimport { EntryEmbedable } from './Models/embedded-object';\nimport { findRenderContent } from './helper/find-render-content';\nimport { RenderOption } from './options';\nimport { findEmbeddedItems } from './helper/find-embeded-object';\nimport { enumerate, enumerateContents } from './helper/enumerate-entries';\n\nexport type AnyNode = TextNode | Node;\n\nexport function jsonToHTML(option: { \n    entry: EntryEmbedable| EntryEmbedable[],\n    paths: string[],\n    renderOption?: RenderOption,\n}) {\n    if (option.entry instanceof Array) {\n        enumerate(option.entry, (entry: EntryEmbedable) => {\n            jsonToHTML({entry, paths: option.paths, renderOption: option.renderOption})\n        })\n    } else {\n        enumerateKeys({\n            entry: option.entry,\n            paths: option.paths,\n            renderOption: option.renderOption,\n        })\n    }\n}\n\nfunction enumerateKeys(option: { \n    entry: EntryEmbedable,\n    paths: string[],\n    renderOption?: RenderOption,\n}) {\n    for (const key of option.paths) {\n        findRenderContent(key, option.entry, ((content: Document | Document[]) => {\n            return enumerateContents(content, option.renderOption, (metadata: Metadata) => {\n                return findEmbeddedItems(metadata, option.entry)[0]\n            })\n        }))\n    }\n}\n","import Node from './nodes/node';\nimport TextNode from './nodes/text-node';\nimport { RenderOption } from './options';\nimport { JsonRTE } from './Models/json-rte-model';\nimport { Metadata } from './Models/metadata-model';\nimport { findRenderContent } from './helper/find-render-content';\nimport { findGQLEmbeddedItems } from './helper/find-embeded-object';\nimport { EmbeddedItem, EntryEmbedable } from './Models/embedded-object';\nimport { enumerate, enumerateContents } from './helper/enumerate-entries';\n\nexport type AnyNode = TextNode | Node;\n\nfunction jsonToHTML(option: { \n    entry: EmbeddedItem| EmbeddedItem[],\n    paths: string[],\n    renderOption?: RenderOption,\n}) {\n    if (option.entry instanceof Array) {\n        enumerate(option.entry, (entry: EmbeddedItem) => {\n            jsonToHTML({entry, paths: option.paths, renderOption: option.renderOption})\n        })\n    } else {\n        enumerateKeys({\n            entry: option.entry,\n            paths: option.paths,\n            renderOption: option.renderOption,\n        })\n    }\n}\n\nfunction enumerateKeys(option: { \n    entry: EntryEmbedable,\n    paths: string[],\n    renderOption?: RenderOption,\n}) {\n    for (const key of option.paths) {\n        findRenderContent(key, \n            option.entry, \n            ((content: JsonRTE) => {\n            if (content && content.json) {\n                const edges = content.embedded_itemsConnection ? content.embedded_itemsConnection.edges : []\n                const items = Object.values(edges || []).reduce((accumulator, value) => accumulator.concat(value.node), [])\n                return enumerateContents(content.json, option.renderOption, (metadata: Metadata) => {\n                    return findGQLEmbeddedItems(metadata, items)[0]\n                })\n            }   \n            return content as unknown as string\n        }))\n    }\n}\nexport const GQL = {\n    jsonToHTML\n}","import { EntryModel } from \".\";\n\nexport function addTags(entry: EntryModel, contentTypeUid: string, tagsAsObject: boolean, locale: string = 'en-us') : void {  \n    if (entry)  \n        entry.$ = getTag(entry, `${contentTypeUid}.${entry.uid}.${locale}`, tagsAsObject, locale)        \n}\n\nfunction getTag(content: object, prefix: string, tagsAsObject: boolean, locale: string): object {\n    const tags: any = {}\n    Object.entries(content).forEach(([key, value]) => {      \n        switch (typeof value) {\n            case \"object\":\n                if (Array.isArray(value)) {\n                    value.forEach((obj, index) => {\n                        if (typeof obj !== 'undefined' && obj !== null && obj._content_type_uid !== undefined && obj.uid !== undefined) {\n                            value[index].$ = getTag(obj, `${obj._content_type_uid}.${obj.uid}.${obj.locale || locale}`, tagsAsObject, locale)\n                        }else {\n                            if (typeof obj === \"object\") {\n                                obj.$ = getTag(obj, `${prefix}.${key}.${index}`, tagsAsObject, locale)\n                            } else {\n                                tags[key] = getTagsValue(`${prefix}.${key}`, tagsAsObject)\n                            }\n                        }\n                    })\n                }else {\n                    if (value) {\n                        value.$ = getTag(value, `${prefix}.${key}`, tagsAsObject, locale)\n                    }\n                }\n                break;\n            default:\n                tags[key] = getTagsValue(`${prefix}.${key}`, tagsAsObject)\n        }\n    })\n    return tags\n}\n\nfunction getTagsValue (dataValue:string, tagsAsObject: boolean): any {\n    if (tagsAsObject) {\n        return { \"data-cslp\": dataValue };\n    } else {\n        return `data-cslp=${dataValue}`;\n    }\n}"],"names":["_a","StyleType","NodeType","MarkType","jsonToHTML","enumerateKeys"],"mappings":";;;;AA+BM,SAAU,cAAc,CAAC,SAAqB,EAAA;IAClD,OAAO;AACL,QAAA,IAAI,EAAE,SAAS,CAAC,OAAO,CAAC;QACxB,OAAO,EAAE,SAAS,CAAC,oBAAoB,CAAC,IAAI,SAAS,CAAC,oBAAoB,CAAC;QAC3E,QAAQ,EAAE,SAAS,CAAC,IAAI;AACxB,QAAA,SAAS,EAAE,SAAS,CAAC,gBAAgB,CAAc;AACnD,QAAA,UAAU,EAAE,SAAS;AACrB,QAAA,cAAc,EAAE,SAAS,CAAC,2BAA2B,CAAC;KACvD,CAAA;AACH,CAAC;AAEe,SAAA,cAAc,CAAC,SAAqB,EAAE,QAAkB,EAAA;IACvE,OAAO;QACN,IAAI,EAAE,QAAQ,CAAC,IAAI;QACnB,OAAO,EAAE,SAAS,CAAC,WAAW,CAAC,IAAI,SAAS,CAAC,WAAW,CAAC;QACzD,QAAQ,EAAE,SAAS,CAAC,IAAI;AACxB,QAAA,SAAS,EAAE,SAAS,CAAC,cAAc,CAAc;AACjD,QAAA,UAAU,EAAE,SAAS;AACrB,QAAA,cAAc,EAAE,SAAS,CAAC,kBAAkB,CAAC;KAC7C,CAAA;AACF,CAAC;AAEK,SAAU,iBAAiB,CAAE,UAAsB,EAAA;IACvD,IAAI,MAAM,GAAG,EAAE,CAAA;4BACJ,GAAG,EAAA;AACZ,QAAA,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,EAAE,GAAG,CAAC,EAAE;AACzD,YAAA,IAAI,OAAO,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;YAC9B,IAAI,OAAO,YAAY,KAAK,EAAE;gBAC5B,IAAI,eAAa,GAAG,EAAE,CAAA;gBACtB,IAAI,SAAO,GAAG,IAAI,CAAA;AAClB,gBAAA,OAAO,CAAC,OAAO,CAAC,UAAC,KAAK,EAAA;AACpB,oBAAA,IAAI,SAAO,EAAE;AACX,wBAAA,eAAa,IAAI,EAAA,CAAA,MAAA,CAAG,KAAK,CAAE,CAAA;wBAC3B,SAAO,GAAG,KAAK,CAAA;AAChB,qBAAA;AAAK,yBAAA;AACJ,wBAAA,eAAa,IAAI,IAAA,CAAA,MAAA,CAAK,KAAK,CAAE,CAAA;AAC9B,qBAAA;AACH,iBAAC,CAAC,CAAA;gBACF,OAAO,GAAG,eAAa,CAAA;AACxB,aAAA;AAAM,iBAAA,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;gBACtC,IAAI,aAAa,GAAG,EAAE,CAAA;AACtB,gBAAA,KAAK,IAAM,UAAU,IAAI,OAAO,EAAE;AAChC,oBAAA,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,EAAE;AAC7D,wBAAA,IAAM,KAAK,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AAClC,wBAAA,aAAa,IAAI,EAAG,CAAA,MAAA,CAAA,UAAU,EAAI,GAAA,CAAA,CAAA,MAAA,CAAA,KAAK,OAAI,CAAA;AAC5C,qBAAA;AACF,iBAAA;gBACD,OAAO,GAAG,aAAa,CAAA;AACxB,aAAA;AACD,YAAA,MAAM,IAAI,GAAI,CAAA,MAAA,CAAA,GAAG,EAAK,KAAA,CAAA,CAAA,MAAA,CAAA,OAAO,OAAG,CAAA;AACjC,SAAA;;IA1BH,KAAK,IAAM,GAAG,IAAI,UAAU,EAAA;gBAAjB,GAAG,CAAA,CAAA;AA2Bb,KAAA;AACD,IAAA,OAAO,MAAM,CAAA;AACf;;ACpFA,IAAK,SAMJ,CAAA;AAND,CAAA,UAAK,SAAS,EAAA;AACZ,IAAA,SAAA,CAAA,OAAA,CAAA,GAAA,OAAe,CAAA;AACf,IAAA,SAAA,CAAA,QAAA,CAAA,GAAA,QAAiB,CAAA;AACjB,IAAA,SAAA,CAAA,MAAA,CAAA,GAAA,MAAa,CAAA;AACb,IAAA,SAAA,CAAA,SAAA,CAAA,GAAA,SAAmB,CAAA;AACnB,IAAA,SAAA,CAAA,UAAA,CAAA,GAAA,UAAqB,CAAA;AACvB,CAAC,EANI,SAAS,KAAT,SAAS,GAMb,EAAA,CAAA,CAAA,CAAA;AAED,kBAAe,SAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPlB,SAAU,aAAa,CAAC,OAAgB,EAAA;IAC5C,IAAI,GAAG,GAAQ,EAAG,CAAA;AAClB,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAC,OAAO,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAChD,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAA;AACxE,KAAA;AAED,IAAA,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,UAAC,SAAS,EAAA;AACnC,QAAA,IAAM,IAAI,IAAe,SAAS,CAAC,CAAA;QACnC,GAAG,GAAA,QAAA,CAAA,QAAA,CAAA,EAAA,EACE,GAAG,CACH,EAAA,YAAY,CAAC,IAAI,CAAC,CACtB,CAAA;AACH,KAAC,CAAC,CAAA;AACF,IAAA,OAAO,GAAG,CAAA;AACZ,CAAC;AAED,SAAS,YAAY,CAAC,IAAe,EAAA;IACnC,IAAM,GAAG,GAAQ,EAAE,CAAA;AACnB,IAAA,IAAI,IAAI,CAAC,QAAQ,KAAK,CAAC,EAAE;AACvB,QAAA,GAAG,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;AACjC,KAAA;AAAK,SAAA,IAAI,IAAI,CAAC,QAAQ,KAAK,CAAC,EAAE;AAC7B,QAAA,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,GAAG,aAAa,CAAC,IAAe,CAAC,CAAA;AAClE,KAAA;AACD,IAAA,OAAO,GAAG,CAAA;AACZ;;ACvBA,IAAM,SAAS,GAAG,2BAA2B,CAAC;AAQ9C,MAAM,CAAC,SAAS,CAAC,mBAAmB,GAAG,UACrC,UAAgE,EAAA;AAGhE,IAAA,IAAM,GAAG,GAAG,GAAI,CAAA,MAAA,CAAA,SAAS,EAAI,GAAA,CAAA,CAAA,MAAA,CAAA,IAAI,CAAC,QAAQ,EAAE,EAAA,IAAA,CAAA,CAAA,MAAA,CAAK,SAAS,EAAA,GAAA,CAAG,CAAC;AAC9D,IAAA,IAAM,IAAI,GAAG,CAAC,IAAI,SAAS,EAAE,EAAE,eAAe,CAAC,GAAG,EAAE,WAAW,CAAC,CAAA;IAChE,IAAM,eAAe,GAAG,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAA;AAEhE,IAAA,eAAe,CAAC,OAAO,CAAC,UAAC,OAAO,EAAA;AAC9B,QAAA,UAAU,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,CAAC,aAAa,CAAC,OAAO,CAAe,CAAC,CAAC,CAAA;AACrF,KAAC,CAAC,CAAA;IACF,IAAM,aAAa,GAAG,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAAA;AAC9D,IAAA,aAAa,CAAC,OAAO,CAAC,UAAC,OAAO,EAAA;AAC5B,QAAA,UAAU,CAAC,OAAO,CAAC,SAAS,EAAE,cAAc,CAAC,aAAa,CAAC,OAAO,CAAe,CAAC,CAAC,CAAA;AACrF,KAAC,CAAC,CAAA;AACJ,CAAC;;;ACnBM,IAAM,cAAc,IAAAA,IAAA,GAAA,EAAA;AACzB,IAAAA,IAAA,CAACC,WAAS,CAAC,KAAK,CAAA,GAAG,UAAC,IAA8B,EAAA;AAChD,QAAA,OAAA,UAAW,CAAA,MAAA,CAAA,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,GAAG,EAA8B,6BAAA,CAAA,CAAA,MAAA,CAAA,IAAI,CAAC,iBAAiB,KAAK,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,GAAG,EAAE,CAAC,EAAmB,mBAAA,CAAA,CAAA;KAAA;AAC/J,IAAAD,IAAA,CAACC,WAAS,CAAC,MAAM,IAAG,UAAC,IAA6B,IAAK,OAAA,QAAA,CAAA,MAAA,CAAS,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,GAAG,EAAA,SAAA,CAAS,GAAA;IAC/FD,IAAC,CAAAC,WAAS,CAAC,IAAI,CAAA,GAAG,UAAC,IAA6B,EAAE,QAAkB,EAAK,EAAA,OAAA,oBAAY,IAAI,CAAC,GAAG,EAAK,KAAA,CAAA,CAAA,MAAA,CAAA,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,GAAG,KAAK,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,EAAE,CAAC,EAAM,MAAA,CAAA,CAAA,EAAA;AACvL,IAAAD,IAAA,CAACC,WAAS,CAAC,OAAO,CAAA,GAAG,UAAC,IAA6B,EAAE,QAAkB,EAAK,EAAA,OAAA,aAAa,CAAA,MAAA,CAAA,IAAI,CAAC,GAAG,EAAA,WAAA,CAAA,CAAA,MAAA,CAAU,QAAQ,CAAC,UAAU,CAAC,GAAG,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,GAAG;AACxK,YAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,EAAE,CAAC,EAAA,OAAA,CAAM,GAAA;IAC/CD,IAAC,CAAAC,WAAS,CAAC,QAAQ,CAAA,GAAG,UAAC,IAA6B,EAAE,QAAkB,EAAK,EAAA,OAAA,oBAAY,IAAI,CAAC,GAAG,EAAK,KAAA,CAAA,CAAA,MAAA,CAAA,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,GAAG,KAAK,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,gBAAgB,GAAG,EAAE,CAAC,EAAM,MAAA,CAAA,CAAA,EAAA;SACzM;;ACRD;SACgB,iBAAiB,CAC/B,GAAW,EACX,cAAsB,EACtB,aAA+C,EAAA;AAA/C,IAAA,IAAA,aAAA,KAAA,KAAA,CAAA,EAAA,EAAA,aAA+C,GAAA,EAAA,CAAA,EAAA;AAE/C,IAAA,OAAO,aAAa,CAAC,MAAM,CAAC,UAAC,KAAU,EAAA;AACrC,QAAA,IAAI,CAAC,KAAK,CAAC,GAAG,IAAK,KAAsB,CAAC,GAAG,KAAK,GAAG,IAAK,KAAsB,CAAC,iBAAiB,KAAK,cAAc,MAAK,KAAK,CAAC,MAAM,IAAK,KAAmB,CAAC,MAAM,CAAC,GAAG,KAAK,GAAG,IAAK,KAAmB,CAAC,MAAM,CAAC,gBAAgB,KAAK,cAAc,CAAC,EAAE;AACrP,YAAA,OAAO,KAAK,CAAC;AACd,SAAA;AACH,KAAC,CAAC,CAAC;AACL,CAAC;AAEe,SAAA,iBAAiB,CAAC,GAAW,EAAE,cAAgD,EAAA;AAAhD,IAAA,IAAA,cAAA,KAAA,KAAA,CAAA,EAAA,EAAA,cAAgD,GAAA,EAAA,CAAA,EAAA;AAC7F,IAAA,OAAO,cAAc,CAAC,MAAM,CAAC,UAAC,KAAU,EAAA;QACtC,IAAI,CAAC,KAAK,CAAC,GAAG,IAAK,KAAsB,CAAC,GAAG,KAAK,GAAG,KAAK,KAAK,CAAC,MAAM,IAAK,KAAmB,CAAC,MAAM,CAAC,GAAG,KAAK,GAAG,EAAE;AACjH,YAAA,OAAO,KAAK,CAAC;AACd,SAAA;AACH,KAAC,CAAC,CAAC;AACL,CAAC;AAEe,SAAA,oBAAoB,CAAC,QAAkB,EAAE,KAAkC,EAAA;AACzF,IAAA,IAAI,QAAQ,CAAC,QAAQ,KAAK,OAAO,EAAE;AACjC,QAAA,OAAO,iBAAiB,CACpB,QAAQ,CAAC,OAAO,EAChB,QAAQ,CAAC,cAAc,EACvB,KAAK,CACJ,CAAC;AACP,KAAA;AAAM,SAAA;QACL,OAAO,iBAAiB,CACpB,QAAQ,CAAC,OAAO,EAChB,KAAK,CACJ,CAAC;AACP,KAAA;AACH,CAAC;AAEe,SAAA,iBAAiB,CAAC,MAAgB,EAAE,KAAqB,EAAA;IACvE,IAAI,MAAM,IAAI,MAAM,KAAK,SAAS,IAAI,KAAK,IAAI,KAAK,KAAK,SAAS,EAAE;AAClE,QAAA,IAAI,KAAK,CAAC,eAAe,KAAK,SAAS,EAAE;YACvC,IAAM,cAAc,GAAG,KAAK,CAAA;AAC5B,YAAA,IAAM,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,eAAe,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,UAAC,WAAW,EAAE,KAAK,EAAA,EAAK,OAAA,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,CAAzB,EAAyB,EAAE,EAAE,CAAC,CAAA;AAC/H,YAAA,OAAO,oBAAoB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;AAC3C,SAAA;AACF,KAAA;AACD,IAAA,OAAO,EAAE,CAAC;AACZ,CAAC;SAEe,gBAAgB,CAC9B,IAA8B,EAC9B,QAAkB,EAClB,aAA4B,EAAA;AAE5B,IAAA,IAAI,CAAC,CAAC,IAAI,IAAI,IAAI,KAAK,SAAS,MAAM,CAAC,QAAQ,IAAI,QAAQ,KAAK,SAAS,CAAC,EAAE;AAC1E,QAAA,OAAO,EAAE,CAAC;AACX,KAAA;IAED,IAAI,aAAa,IAAI,aAAa,CAAC,QAAQ,CAAC,SAAS,CAAC,KAAK,SAAS,EAAE;QACpE,IAAM,cAAc,GAAG,aAAa,CAAC,QAAQ,CAAC,SAAS,CAAe,CAAC;AAEtE,QAAA,IACE,QAAQ,CAAC,UAA8B,CAAC,2BAA2B,CAAC,KAAK,SAAS;YACnF,OAAO,cAAc,KAAK,UAAU;YACpC,cAAc,CAAE,QAAQ,CAAC,UAA8B,CAAC,2BAA2B,CAAC,CAAC,KAAK,SAAS,EACnG;AACA,YAAA,OAAQ,cAAoC,CAAE,QAAQ,CAAC,UAA8B,CAAC,2BAA2B,CAAC,CAAC,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AACrI,SAAA;AAAM,aAAA,IACJ,QAAQ,CAAC,UAA8B,CAAC,2BAA2B,CAAC,KAAK,SAAS;YACnF,OAAO,cAAc,KAAK,UAAU;AACnC,YAAA,cAAoC,CAAC,QAAQ,KAAK,SAAS,EAC5D;YACA,OAAQ,cAAoC,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AACvE,SAAA;AAAM,aAAA,IACL,QAAQ,CAAC,cAAc,KAAK,SAAS;YACrC,OAAO,cAAc,KAAK,UAAU;AACpC,YAAA,cAAc,CAAC,QAAQ,CAAC,cAAc,CAAC,KAAK,SAAS,EACrD;YACA,OAAQ,cAAoC,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;AACtF,SAAA;AAAM,aAAA,IACL,QAAQ,CAAC,cAAc,KAAK,SAAS;YACrC,OAAO,cAAc,KAAK,UAAU;AACnC,YAAA,cAAoC,CAAC,QAAQ,KAAK,SAAS,EAC5D;YACA,OAAQ,cAAoC,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AACvE,SAAA;AAAO,aAAA,IAAI,OAAO,cAAc,KAAK,UAAU,EAAE;AAChD,YAAA,OAAO,cAAc,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AACvC,SAAA;AACF,KAAA;IACD,IAAM,qBAAqB,GAAG,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAe,CAAC;AAC/E,IAAA,OAAO,qBAAqB,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AAC/C;;SC9FgB,iBAAiB,CAAO,QAAgB,EAAE,KAAqB,EAAE,MAA6C,EAAA;AACzH,IAAA,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,CAAA;AACnD,CAAC;SAEe,UAAU,CAAO,IAAc,EAAE,MAAW,EAAE,MAA6C,EAAA;AACvG,IAAA,IAAI,IAAI,EAAE;AACN,QAAA,IAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAA;QACnB,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,EAAE;YAClC,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAA;AACpC,SAAA;AAAM,aAAA,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;AACxB,YAAA,IAAI,MAAM,CAAC,GAAG,CAAC,EAAE;gBACb,IAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;gBAC7B,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;;oBAE5B,KAAqB,IAAA,EAAA,GAAA,CAAW,EAAX,EAAA,GAAA,MAAM,CAAC,GAAG,CAAC,EAAX,EAAA,GAAA,EAAA,CAAA,MAAW,EAAX,EAAA,EAAW,EAAE;AAA7B,wBAAA,IAAM,MAAM,GAAA,EAAA,CAAA,EAAA,CAAA,CAAA;AACb,wBAAA,UAAU,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC,CAAA;AACtC,qBAAA;AACJ,iBAAA;AAAM,qBAAA,IAAI,OAAO,MAAM,CAAC,GAAG,CAAC,KAAK,QAAQ,EAAE;oBACxC,UAAU,CAAC,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,CAAA;AAC3C,iBAAA;AACJ,aAAA;AACJ,SAAA;AACJ,KAAA;AACL;;AClBA;;;;;AAKG;AACG,SAAU,MAAM,CAAC,MAItB,EAAA;AAEG,IAAA,SAAS,WAAW,CAAC,IAAY,EAAE,KAAqB,EAAA;AACpD,QAAA,iBAAiB,CAAC,IAAI,EAAE,KAAK,EAAE,UAAC,OAAyB,EAAA;AACrD,YAAA,OAAO,aAAa,CAAC,OAAO,EAAE,EAAE,KAAK,EAAA,KAAA,EAAE,YAAY,EAAE,MAAM,CAAC,YAAY,EAAE,CAAC,CAAA;AAC/E,SAAC,CAAC,CAAA;KACL;IAED,SAAS,aAAa,CAAE,KAAqB,EAAA;AACzC,QAAA,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;YAC5C,MAAM,CAAC,IAAI,CAAA,QAAA,CAAA,EAAA,EACJ,KAAK,CAAC,eAAe,CAAA,CAC1B,CAAC,OAAO,CAAC,UAAC,IAAI,EAAA;AACZ,gBAAA,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;AAC5B,aAAC,CAAC,CAAA;AACL,SAAA;AAAM,aAAA;AACH,YAAA,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,UAAC,IAAI,EAAA;AACtB,gBAAA,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;AAC5B,aAAC,CAAC,CAAA;AACL,SAAA;KACJ;AAED,IAAA,IAAI,MAAM,CAAC,KAAK,YAAY,KAAK,EAAE;AAC/B,QAAA,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,UAAC,KAAK,EAAA;YACvB,aAAa,CAAC,KAAK,CAAC,CAAA;AACxB,SAAC,CAAC,CAAA;AACL,KAAA;AAAK,SAAA;AACF,QAAA,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;AAC9B,KAAA;AACL,CAAC;AAED;;;;;AAKG;AACa,SAAA,aAAa,CAAC,OAA4B,EAAE,MAAc,EAAA;;AAEtE,IAAA,IAAI,CAAC,OAAO,IAAI,OAAO,KAAK,SAAS,EAAE;AACnC,QAAA,OAAO,EAAE,CAAA;AACZ,KAAA;;AAGD,IAAA,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;QAC7B,IAAI,kBAAgB,GAAG,OAAO,CAAA;AAC9B,QAAA,OAAO,CAAC,mBAAmB,CAAC,UAAC,gBAAwB,EAAE,MAAgB,EAAA;YACnE,kBAAgB,GAAG,0BAA0B,CACzC,kBAAgB,EAChB,gBAAgB,EAChB,MAAM,EACN,MAAM,CAAC,CAAA;AACf,SAAC,CAAC,CAAA;AACF,QAAA,OAAO,kBAAgB,CAAA;AAC1B,KAAA;;IAGD,IAAM,aAAa,GAAa,EAAE,CAAA;AAClC,IAAA,OAAO,CAAC,OAAO,CAAC,UAAC,OAAO,EAAA;QACpB,aAAa,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,MAAM,CAAW,CAAC,CAAA;AAChE,KAAC,CAAC,CAAA;AACF,IAAA,OAAO,aAAa,CAAA;AACxB,CAAC;AAED,SAAS,0BAA0B,CAAC,OAAc,EAAE,gBAAwB,EAAE,QAAkB,EAAE,MAAc,EAAA;IAC5G,IAAM,eAAe,GAAG,iBAAiB,CAAC,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,CAAA;AACjE,IAAA,IAAM,YAAY,GAAG,gBAAgB,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,MAAM,CAAC,YAAY,CAAC,CAAA;IACxF,OAAO,OAAO,CAAC,OAAO,CAAC,gBAAgB,EAAE,YAAY,CAAC,CAAA;AAC1D;;ACpFA,IAAK,QAkCJ,CAAA;AAlCD,CAAA,UAAK,QAAQ,EAAA;AACT,IAAA,QAAA,CAAA,UAAA,CAAA,GAAA,KAAgB,CAAA;AAChB,IAAA,QAAA,CAAA,WAAA,CAAA,GAAA,GAAe,CAAA;AAEf,IAAA,QAAA,CAAA,MAAA,CAAA,GAAA,GAAU,CAAA;AACV,IAAA,QAAA,CAAA,OAAA,CAAA,GAAA,KAAa,CAAA;AACb,IAAA,QAAA,CAAA,OAAA,CAAA,GAAA,OAAe,CAAA;AAEf,IAAA,QAAA,CAAA,WAAA,CAAA,GAAA,IAAgB,CAAA;AAChB,IAAA,QAAA,CAAA,WAAA,CAAA,GAAA,IAAgB,CAAA;AAChB,IAAA,QAAA,CAAA,WAAA,CAAA,GAAA,IAAgB,CAAA;AAChB,IAAA,QAAA,CAAA,WAAA,CAAA,GAAA,IAAgB,CAAA;AAChB,IAAA,QAAA,CAAA,WAAA,CAAA,GAAA,IAAgB,CAAA;AAChB,IAAA,QAAA,CAAA,WAAA,CAAA,GAAA,IAAgB,CAAA;AAEhB,IAAA,QAAA,CAAA,YAAA,CAAA,GAAA,IAAiB,CAAA;AACjB,IAAA,QAAA,CAAA,cAAA,CAAA,GAAA,IAAmB,CAAA;AACnB,IAAA,QAAA,CAAA,WAAA,CAAA,GAAA,IAAgB,CAAA;AAEhB,IAAA,QAAA,CAAA,IAAA,CAAA,GAAA,IAAS,CAAA;AAET,IAAA,QAAA,CAAA,OAAA,CAAA,GAAA,OAAe,CAAA;AACf,IAAA,QAAA,CAAA,cAAA,CAAA,GAAA,OAAsB,CAAA;AACtB,IAAA,QAAA,CAAA,YAAA,CAAA,GAAA,OAAoB,CAAA;AACpB,IAAA,QAAA,CAAA,cAAA,CAAA,GAAA,OAAsB,CAAA;AACtB,IAAA,QAAA,CAAA,WAAA,CAAA,GAAA,IAAgB,CAAA;AAChB,IAAA,QAAA,CAAA,YAAA,CAAA,GAAA,IAAiB,CAAA;AACjB,IAAA,QAAA,CAAA,YAAA,CAAA,GAAA,IAAiB,CAAA;AAEjB,IAAA,QAAA,CAAA,aAAA,CAAA,GAAA,YAA0B,CAAA;AAC1B,IAAA,QAAA,CAAA,MAAA,CAAA,GAAA,MAAa,CAAA;AAEb,IAAA,QAAA,CAAA,MAAA,CAAA,GAAA,MAAa,CAAA;AACb,IAAA,QAAA,CAAA,WAAA,CAAA,GAAA,WAAuB,CAAA;AAC3B,CAAC,EAlCI,QAAQ,KAAR,QAAQ,GAkCZ,EAAA,CAAA,CAAA,CAAA;AAED,iBAAe,QAAQ;;ACpCvB,IAAK,QAWJ,CAAA;AAXD,CAAA,UAAK,QAAQ,EAAA;AACT,IAAA,QAAA,CAAA,MAAA,CAAA,GAAA,MAAa,CAAA;AACb,IAAA,QAAA,CAAA,QAAA,CAAA,GAAA,QAAiB,CAAA;AACjB,IAAA,QAAA,CAAA,WAAA,CAAA,GAAA,WAAuB,CAAA;AAEvB,IAAA,QAAA,CAAA,gBAAA,CAAA,GAAA,eAAgC,CAAA;AAChC,IAAA,QAAA,CAAA,aAAA,CAAA,GAAA,YAA0B,CAAA;AAG1B,IAAA,QAAA,CAAA,WAAA,CAAA,GAAA,WAAuB,CAAA;AACvB,IAAA,QAAA,CAAA,aAAA,CAAA,GAAA,aAA2B,CAAA;AAC/B,CAAC,EAXI,QAAQ,KAAR,QAAQ,GAWZ,EAAA,CAAA,CAAA,CAAA;AAED,iBAAe,QAAQ;;ACTvB,IAAA,IAAA,kBAAA,YAAA;AAAA,IAAA,SAAA,IAAA,GAAA;KAIC;IAAD,OAAC,IAAA,CAAA;AAAD,CAAC,EAAA;;ACLD,IAAA,QAAA,kBAAA,UAAA,MAAA,EAAA;IAAsC,SAAI,CAAA,QAAA,EAAA,MAAA,CAAA,CAAA;AAGtC,IAAA,SAAA,QAAA,GAAA;AAAA,QAAA,IAAA,KAAA,GACI,iBAAO,IAEV,IAAA,CAAA;AADG,QAAA,KAAI,CAAC,IAAI,GAAGC,UAAQ,CAAC,QAAQ,CAAA;;KAChC;IACL,OAAC,QAAA,CAAA;AAAD,CAPA,CAAsC,IAAI,CAOzC;;ACRD,IAAA,QAAA,kBAAA,UAAA,MAAA,EAAA;IAAsC,SAAI,CAAA,QAAA,EAAA,MAAA,CAAA,CAAA;AAWtC,IAAA,SAAA,QAAA,CAAY,IAAY,EAAA;AAAxB,QAAA,IAAA,KAAA,GACI,iBAAO,IAEV,IAAA,CAAA;AADG,QAAA,KAAI,CAAC,IAAI,GAAG,IAAI,CAAA;;KACnB;IACL,OAAC,QAAA,CAAA;AAAD,CAfA,CAAsC,IAAI,CAezC;;;ACZM,IAAM,iBAAiB,IAAA,EAAA,GAAA,EAAA;AAC1B,IAAA,EAAA,CAACA,UAAQ,CAAC,QAAQ,CAAA,GAAE,UAAC,IAAU,EAAA;AAC3B,QAAA,OAAO,EAAE,CAAA;KACZ;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,SAAS,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACvC,OAAO,KAAA,CAAA,MAAA,CAAM,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAM,CAAA;KAC1C;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,IAAI,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QAClC,OAAO,YAAA,CAAA,MAAA,CAAY,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,EAAA,KAAA,CAAA,CAAA,MAAA,CAAK,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAM,CAAA;KACtF;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,KAAK,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACpC,OAAO,aAAA,CAAA,MAAA,CAAa,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,EAAA,OAAA,CAAA,CAAA,MAAA,CAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAE,CAAA;KACnF;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,KAAK,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACpC,OAAO,gBAAA,CAAA,MAAA,CAAgB,IAAI,CAAC,KAAK,CAAC,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,EAAA,KAAA,CAAA,CAAA,MAAA,CAAK,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,cAAW,CAAA;KAC7F;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,SAAS,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACxC,OAAO,MAAA,CAAA,MAAA,CAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAO,CAAA;KAC3C;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,SAAS,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACxC,OAAO,MAAA,CAAA,MAAA,CAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAO,CAAA;KAC3C;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,SAAS,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACxC,OAAO,MAAA,CAAA,MAAA,CAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAO,CAAA;KAC3C;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,SAAS,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACxC,OAAO,MAAA,CAAA,MAAA,CAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAO,CAAA;KAC3C;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,SAAS,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACxC,OAAO,MAAA,CAAA,MAAA,CAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAO,CAAA;KAC3C;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,SAAS,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACxC,OAAO,MAAA,CAAA,MAAA,CAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAO,CAAA;KAC3C;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,UAAU,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACzC,OAAO,MAAA,CAAA,MAAA,CAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAO,CAAA;KAC3C;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,YAAY,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QAC3C,OAAO,MAAA,CAAA,MAAA,CAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAO,CAAA;KAC3C;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,SAAS,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACxC,OAAO,MAAA,CAAA,MAAA,CAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAO,CAAA;KAC3C;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,EAAE,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;AACjC,QAAA,OAAO,MAAM,CAAA;KAChB;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,KAAK,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACpC,OAAO,SAAA,CAAA,MAAA,CAAU,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAU,CAAA;KACjD;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,YAAY,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QAC3C,OAAO,SAAA,CAAA,MAAA,CAAU,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAU,CAAA;KACjD;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,UAAU,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACzC,OAAO,SAAA,CAAA,MAAA,CAAU,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAU,CAAA;KACjD;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,YAAY,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QAC3C,OAAO,SAAA,CAAA,MAAA,CAAU,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAU,CAAA;KACjD;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,SAAS,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACxC,OAAO,MAAA,CAAA,MAAA,CAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAO,CAAA;KAC3C;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,UAAU,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACzC,OAAO,MAAA,CAAA,MAAA,CAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAO,CAAA;KAC3C;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,UAAU,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACzC,OAAO,MAAA,CAAA,MAAA,CAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAO,CAAA;KAC3C;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,WAAW,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QAC1C,OAAO,cAAA,CAAA,MAAA,CAAe,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,kBAAe,CAAA;KAC3D;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,IAAI,IAAE,UAAC,IAAU,EAAE,IAAU,EAAA;QACnC,OAAO,QAAA,CAAA,MAAA,CAAS,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAS,CAAA;KAC/C;AAED,IAAA,EAAA,CAAC,WAAW,CAAA,GAAE,UAAC,IAAU,EAAE,IAAU,EAAA;AACjC,QAAA,OAAO,EAAE,CAAA;KACZ;AACD,IAAA,EAAA,CAAC,SAAS,CAAA,GAAE,UAAC,IAAU,EAAE,IAAU,EAAA;AAC/B,QAAA,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;KAC7B;AAED,IAAA,EAAA,CAACC,UAAQ,CAAC,IAAI,CAAA,GAAE,UAAC,IAAY,EAAA;QACzB,OAAO,UAAA,CAAA,MAAA,CAAW,IAAI,EAAA,WAAA,CAAW,CAAA;KACpC;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,MAAM,CAAA,GAAE,UAAC,IAAY,EAAA;QAC3B,OAAO,MAAA,CAAA,MAAA,CAAO,IAAI,EAAA,OAAA,CAAO,CAAA;KAC5B;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,SAAS,CAAA,GAAE,UAAC,IAAY,EAAA;QAC9B,OAAO,KAAA,CAAA,MAAA,CAAM,IAAI,EAAA,MAAA,CAAM,CAAA;KAC1B;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,cAAc,CAAA,GAAE,UAAC,IAAY,EAAA;QACnC,OAAO,UAAA,CAAA,MAAA,CAAW,IAAI,EAAA,WAAA,CAAW,CAAA;KACpC;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,WAAW,CAAA,GAAE,UAAC,IAAY,EAAA;QAChC,OAAO,QAAA,CAAA,MAAA,CAAS,IAAI,EAAA,SAAA,CAAS,CAAA;KAChC;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,SAAS,CAAA,GAAE,UAAC,IAAY,EAAA;QAC9B,OAAO,OAAA,CAAA,MAAA,CAAQ,IAAI,EAAA,QAAA,CAAQ,CAAA;KAC9B;AACD,IAAA,EAAA,CAACA,UAAQ,CAAC,WAAW,CAAA,GAAE,UAAC,IAAY,EAAA;QAChC,OAAO,OAAA,CAAA,MAAA,CAAQ,IAAI,EAAA,QAAA,CAAQ,CAAA;KAC9B;OAEJ;;AChGe,SAAA,SAAS,CACrB,OAA0C,EAC1C,OAAsD,EAAA;AAEtD,IAAA,KAAoB,UAAO,EAAP,SAAA,GAAA,OAAO,EAAP,EAAO,GAAA,SAAA,CAAA,MAAA,EAAP,IAAO,EAAE;AAAxB,QAAA,IAAM,KAAK,GAAA,SAAA,CAAA,EAAA,CAAA,CAAA;QACZ,OAAO,CAAC,KAAK,CAAC,CAAA;AACjB,KAAA;AACL,CAAC;SAEe,iBAAiB,CAC7B,OAA6B,EAC7B,YAA2B,EAC3B,WAA6D,EAAA;AAE7D,IAAA,IAAI,EAAE,OAAO,YAAY,KAAK,CAAC,IAAI,OAAO,CAAC,IAAI,KAAK,KAAK,EAAE;AACvD,QAAA,OAAO,OAA4B,CAAA;AACtC,KAAA;IACD,IAAI,OAAO,YAAY,KAAK,EAAE;QAC1B,IAAM,QAAM,GAAa,EAAE,CAAA;AAC3B,QAAA,OAAO,CAAC,OAAO,CAAC,UAAC,GAAG,EAAA;AAChB,YAAA,QAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,EAAE,YAAY,EAAE,WAAW,CAAW,CAAC,CAAA;AAC5E,SAAC,CAAC,CAAA;AACF,QAAA,OAAO,QAAM,CAAA;AAChB,KAAA;AACD,IAAA,IAAM,kBAAkB,GACjB,QAAA,CAAA,QAAA,CAAA,EAAA,EAAA,iBAAiB,CACjB,EAAA,YAAY,CAClB,CAAA;IACD,OAAO,kBAAkB,CAAC,OAAO,CAAC,QAAQ,EAAE,kBAAkB,EAAE,WAAW,CAAC,CAAA;AAChF,CAAC;AAEe,SAAA,cAAc,CAAC,IAAc,EAAE,YAA0B,EAAA;AACrE,IAAA,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;IACpB,IAAI,IAAI,CAAC,WAAW,EAAE;QAClB,IAAI,GAAK,YAAY,CAACA,UAAQ,CAAC,WAAW,CAAgB,CAAC,IAAI,CAAC,CAAA;AACnE,KAAA;IACD,IAAI,IAAI,CAAC,SAAS,EAAE;QAChB,IAAI,GAAK,YAAY,CAACA,UAAQ,CAAC,SAAS,CAAgB,CAAC,IAAI,CAAC,CAAA;AACjE,KAAA;IACD,IAAI,IAAI,CAAC,UAAU,EAAE;QACjB,IAAI,GAAK,YAAY,CAACA,UAAQ,CAAC,WAAW,CAAgB,CAAC,IAAI,CAAC,CAAA;AACnE,KAAA;IACD,IAAI,IAAI,CAAC,aAAa,EAAE;QACpB,IAAI,GAAK,YAAY,CAACA,UAAQ,CAAC,cAAc,CAAgB,CAAC,IAAI,CAAC,CAAA;AACtE,KAAA;IACD,IAAI,IAAI,CAAC,SAAS,EAAE;QAChB,IAAI,GAAK,YAAY,CAACA,UAAQ,CAAC,SAAS,CAAgB,CAAC,IAAI,CAAC,CAAA;AACjE,KAAA;IACD,IAAI,IAAI,CAAC,MAAM,EAAE;QACb,IAAI,GAAK,YAAY,CAACA,UAAQ,CAAC,MAAM,CAAgB,CAAC,IAAI,CAAC,CAAA;AAC9D,KAAA;IACD,IAAI,IAAI,CAAC,IAAI,EAAE;QACX,IAAI,GAAK,YAAY,CAACA,UAAQ,CAAC,IAAI,CAAgB,CAAC,IAAI,CAAC,CAAA;AAC5D,KAAA;AACD,IAAA,OAAO,IAAI,CAAA;AACf,CAAC;SACe,eAAe,CAAC,IAAU,EACtC,YAA0B,EAC1B,WAA8D,EAAA;IAE9D,SAAS,kBAAkB,CAAC,aAAmB,EAAA;QAC3C,OAAQ,YAAY,CAAC,aAAa,CAAC,IAAI,CAAgB,CAAC,aAAa,EAAE,SAAS,CAAC,CAAA;KACpF;IACD,IAAI,CAAC,WAAW,IAAI,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,SAAS,EAAE;AACvD,QAAA,OAAO,kBAAkB,CAAC,IAAI,CAAC,CAAA;AAClC,KAAA;IACD,IAAI,CAAC,WAAW,EAAE;AACd,QAAA,OAAO,EAAE,CAAA;AACZ,KAAA;AACD,IAAA,IAAM,QAAQ,GAAG,cAAc,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAE,EAAE,EAAyB,CAAA;AACxI,IAAA,IAAM,IAAI,GAAG,WAAW,CAAC,QAAQ,CAAC,CAAA;IAClC,IAAI,CAAC,IAAI,IAAI,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,SAAS,EAAE;AAChD,QAAA,OAAO,kBAAkB,CAAC,IAAI,CAAC,CAAA;AAClC,KAAA;IACD,OAAO,gBAAgB,CAAC,IAAI,EAAE,QAAQ,EAAE,YAAY,CAAC,CAAA;AACzD,CAAC;AAED,SAAS,kBAAkB,CAAC,KAAgB,EACxC,YAA0B,EAC1B,WAA8D,EAAA;IAE1D,OAAO,KAAK,CAAC,GAAG,CAAS,UAAC,IAAa,EAAK,EAAA,OAAA,UAAU,CAAC,IAAI,EAAE,YAAY,EAAE,WAAW,CAAC,CAAA,EAAA,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;AACzG,CAAC;AAED,SAAS,UAAU,CACf,IAAa,EACb,YAA0B,EAC1B,WAA8D,EAAA;AAE9D,IAAA,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;AACZ,QAAA,OAAO,cAAc,CAAC,IAAgB,EAAE,YAAY,CAAC,CAAA;AACxD,KAAA;AAAK,SAAA,IAAK,IAAI,CAAC,IAAe,KAAK,WAAW,EAAE;QAC7C,OAAO,eAAe,CAAC,IAAI,EAAE,YAAY,EAAE,WAAW,CAAC,CAAA;AAC1D,KAAA;AAAK,SAAA;AACF,QAAA,IAAM,IAAI,GAAS,UAAA,KAAK,EAAA,EAAI,OAAA,kBAAkB,CAAC,KAAK,EAAE,YAAY,EAAE,WAAW,CAAC,CAAA,EAAA,CAAA;QAChF,IAAI,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,SAAS,EAAE;YACvC,OAAQ,YAAY,CAAC,IAAI,CAAC,IAAI,CAAgB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;AAC7D,SAAA;AAAK,aAAA;YACF,OAAQ,YAAY,CAAC,OAAsB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;AAC1D,SAAA;AACJ,KAAA;AACL;;ACrGM,SAAUC,YAAU,CAAC,MAI1B,EAAA;AACG,IAAA,IAAI,MAAM,CAAC,KAAK,YAAY,KAAK,EAAE;AAC/B,QAAA,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,UAAC,KAAqB,EAAA;AAC1C,YAAAA,YAAU,CAAC,EAAC,KAAK,OAAA,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,YAAY,EAAE,MAAM,CAAC,YAAY,EAAC,CAAC,CAAA;AAC/E,SAAC,CAAC,CAAA;AACL,KAAA;AAAM,SAAA;AACH,QAAAC,eAAa,CAAC;YACV,KAAK,EAAE,MAAM,CAAC,KAAK;YACnB,KAAK,EAAE,MAAM,CAAC,KAAK;YACnB,YAAY,EAAE,MAAM,CAAC,YAAY;AACpC,SAAA,CAAC,CAAA;AACL,KAAA;AACL,CAAC;AAED,SAASA,eAAa,CAAC,MAItB,EAAA;IACG,KAAkB,IAAA,EAAA,GAAA,CAAY,EAAZ,EAAA,GAAA,MAAM,CAAC,KAAK,EAAZ,EAAA,GAAA,EAAA,CAAA,MAAY,EAAZ,EAAA,EAAY,EAAE;AAA3B,QAAA,IAAM,GAAG,GAAA,EAAA,CAAA,EAAA,CAAA,CAAA;QACV,iBAAiB,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,GAAG,UAAC,OAA8B,EAAA;YACjE,OAAO,iBAAiB,CAAC,OAAO,EAAE,MAAM,CAAC,YAAY,EAAE,UAAC,QAAkB,EAAA;gBACtE,OAAO,iBAAiB,CAAC,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;AACvD,aAAC,CAAC,CAAA;SACL,EAAE,CAAA;AACN,KAAA;AACL;;AC9BA,SAAS,UAAU,CAAC,MAInB,EAAA;AACG,IAAA,IAAI,MAAM,CAAC,KAAK,YAAY,KAAK,EAAE;AAC/B,QAAA,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,UAAC,KAAmB,EAAA;AACxC,YAAA,UAAU,CAAC,EAAC,KAAK,OAAA,EAAE,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,YAAY,EAAE,MAAM,CAAC,YAAY,EAAC,CAAC,CAAA;AAC/E,SAAC,CAAC,CAAA;AACL,KAAA;AAAM,SAAA;AACH,QAAA,aAAa,CAAC;YACV,KAAK,EAAE,MAAM,CAAC,KAAK;YACnB,KAAK,EAAE,MAAM,CAAC,KAAK;YACnB,YAAY,EAAE,MAAM,CAAC,YAAY;AACpC,SAAA,CAAC,CAAA;AACL,KAAA;AACL,CAAC;AAED,SAAS,aAAa,CAAC,MAItB,EAAA;IACG,KAAkB,IAAA,EAAA,GAAA,CAAY,EAAZ,EAAA,GAAA,MAAM,CAAC,KAAK,EAAZ,EAAA,GAAA,EAAA,CAAA,MAAY,EAAZ,EAAA,EAAY,EAAE;AAA3B,QAAA,IAAM,GAAG,GAAA,EAAA,CAAA,EAAA,CAAA,CAAA;QACV,iBAAiB,CAAC,GAAG,EACjB,MAAM,CAAC,KAAK,GACX,UAAC,OAAgB,EAAA;AAClB,YAAA,IAAI,OAAO,IAAI,OAAO,CAAC,IAAI,EAAE;AACzB,gBAAA,IAAM,KAAK,GAAG,OAAO,CAAC,wBAAwB,GAAG,OAAO,CAAC,wBAAwB,CAAC,KAAK,GAAG,EAAE,CAAA;AAC5F,gBAAA,IAAM,OAAK,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,UAAC,WAAW,EAAE,KAAK,EAAA,EAAK,OAAA,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAA9B,EAA8B,EAAE,EAAE,CAAC,CAAA;gBAC3G,OAAO,iBAAiB,CAAC,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,YAAY,EAAE,UAAC,QAAkB,EAAA;oBAC3E,OAAO,oBAAoB,CAAC,QAAQ,EAAE,OAAK,CAAC,CAAC,CAAC,CAAC,CAAA;AACnD,iBAAC,CAAC,CAAA;AACL,aAAA;AACD,YAAA,OAAO,OAA4B,CAAA;SACtC,EAAE,CAAA;AACN,KAAA;AACL,CAAC;AACY,IAAA,GAAG,GAAG;AACf,IAAA,UAAU,EAAA,UAAA;;;ACjDR,SAAU,OAAO,CAAC,KAAiB,EAAE,cAAsB,EAAE,YAAqB,EAAE,MAAwB,EAAA;AAAxB,IAAA,IAAA,MAAA,KAAA,KAAA,CAAA,EAAA,EAAA,MAAwB,GAAA,OAAA,CAAA,EAAA;AAC9G,IAAA,IAAI,KAAK;QACL,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,UAAG,cAAc,EAAA,GAAA,CAAA,CAAA,MAAA,CAAI,KAAK,CAAC,GAAG,cAAI,MAAM,CAAE,EAAE,YAAY,EAAE,MAAM,CAAC,CAAA;AACjG,CAAC;AAED,SAAS,MAAM,CAAC,OAAe,EAAE,MAAc,EAAE,YAAqB,EAAE,MAAc,EAAA;IAClF,IAAM,IAAI,GAAQ,EAAE,CAAA;IACpB,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,UAAC,EAAY,EAAA;YAAX,GAAG,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,KAAK,GAAA,EAAA,CAAA,CAAA,CAAA,CAAA;QACxC,QAAQ,OAAO,KAAK;AAChB,YAAA,KAAK,QAAQ;AACT,gBAAA,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;AACtB,oBAAA,KAAK,CAAC,OAAO,CAAC,UAAC,GAAG,EAAE,KAAK,EAAA;wBACrB,IAAI,OAAO,GAAG,KAAK,WAAW,IAAI,GAAG,KAAK,IAAI,IAAI,GAAG,CAAC,iBAAiB,KAAK,SAAS,IAAI,GAAG,CAAC,GAAG,KAAK,SAAS,EAAE;AAC5G,4BAAA,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG,EAAE,EAAG,CAAA,MAAA,CAAA,GAAG,CAAC,iBAAiB,EAAA,GAAA,CAAA,CAAA,MAAA,CAAI,GAAG,CAAC,GAAG,EAAA,GAAA,CAAA,CAAA,MAAA,CAAI,GAAG,CAAC,MAAM,IAAI,MAAM,CAAE,EAAE,YAAY,EAAE,MAAM,CAAC,CAAA;AACpH,yBAAA;AAAK,6BAAA;AACF,4BAAA,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AACzB,gCAAA,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG,EAAE,EAAG,CAAA,MAAA,CAAA,MAAM,cAAI,GAAG,EAAA,GAAA,CAAA,CAAA,MAAA,CAAI,KAAK,CAAE,EAAE,YAAY,EAAE,MAAM,CAAC,CAAA;AACzE,6BAAA;AAAM,iCAAA;AACH,gCAAA,IAAI,CAAC,GAAG,CAAC,GAAG,YAAY,CAAC,EAAA,CAAA,MAAA,CAAG,MAAM,EAAA,GAAA,CAAA,CAAA,MAAA,CAAI,GAAG,CAAE,EAAE,YAAY,CAAC,CAAA;AAC7D,6BAAA;AACJ,yBAAA;AACL,qBAAC,CAAC,CAAA;AACL,iBAAA;AAAK,qBAAA;AACF,oBAAA,IAAI,KAAK,EAAE;AACP,wBAAA,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,EAAA,CAAA,MAAA,CAAG,MAAM,EAAA,GAAA,CAAA,CAAA,MAAA,CAAI,GAAG,CAAE,EAAE,YAAY,EAAE,MAAM,CAAC,CAAA;AACpE,qBAAA;AACJ,iBAAA;gBACD,MAAM;AACV,YAAA;AACI,gBAAA,IAAI,CAAC,GAAG,CAAC,GAAG,YAAY,CAAC,EAAA,CAAA,MAAA,CAAG,MAAM,EAAA,GAAA,CAAA,CAAA,MAAA,CAAI,GAAG,CAAE,EAAE,YAAY,CAAC,CAAA;AACjE,SAAA;AACL,KAAC,CAAC,CAAA;AACF,IAAA,OAAO,IAAI,CAAA;AACf,CAAC;AAED,SAAS,YAAY,CAAE,SAAgB,EAAE,YAAqB,EAAA;AAC1D,IAAA,IAAI,YAAY,EAAE;AACd,QAAA,OAAO,EAAE,WAAW,EAAE,SAAS,EAAE,CAAC;AACrC,KAAA;AAAM,SAAA;QACH,OAAO,YAAA,CAAA,MAAA,CAAa,SAAS,CAAE,CAAC;AACnC,KAAA;AACL;;;;;;;;;;;;;;;"}